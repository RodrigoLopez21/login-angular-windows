<div class="min-h-screen bg-gray-100 py-8">
  <div class="max-w-2xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden">
    
    <!-- Header -->
    <div class="bg-blue-600 px-6 py-4">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold text-white">Mi Perfil</h1>
        <button 
          (click)="goBack()"
          class="text-white hover:text-gray-200 font-bold py-2 px-4 rounded"
        >
          ← Volver
        </button>
      </div>
    </div>

    <!-- Formulario -->
    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="p-6 space-y-6">
      
      <!-- Modo visualización/edición -->
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-800">
          {{ isEditing ? 'Editar Perfil' : 'Información Personal' }}
        </h2>
        <button 
          type="button"
          (click)="toggleEdit()"
          class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
        >
          {{ isEditing ? 'Cancelar' : 'Editar' }}
        </button>
      </div>

      <!-- Nombre -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Nombre</label>
        <div *ngIf="!isEditing" class="p-3 bg-gray-50 rounded border">
          {{ profileForm.get('firstName')?.value }}
        </div>
        <input 
          *ngIf="isEditing"
          type="text"
          formControlName="firstName"
          class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="Tu nombre"
        >
      </div>

      <!-- Apellidos -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Apellidos</label>
        <div *ngIf="!isEditing" class="p-3 bg-gray-50 rounded border">
          {{ profileForm.get('lastName')?.value }}
        </div>
        <input 
          *ngIf="isEditing"
          type="text"
          formControlName="lastName"
          class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="Tus apellidos"
        >
      </div>

      <!-- Nombre de Usuario -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Nombre de Usuario</label>
        <div *ngIf="!isEditing" class="p-3 bg-gray-50 rounded border">
          {{ profileForm.get('username')?.value }}
        </div>
        <input 
          *ngIf="isEditing"
          type="text"
          formControlName="username"
          class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="Tu nombre de usuario"
        >
      </div>

      <!-- Email -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
        <div *ngIf="!isEditing" class="p-3 bg-gray-50 rounded border">
          {{ profileForm.get('email')?.value }}
        </div>
        <input 
          *ngIf="isEditing"
          type="email"
          formControlName="email"
          class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="tu@email.com"
        >
      </div>

      <!-- Contraseña (solo en edición) -->
      <div *ngIf="isEditing">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Contraseña 
          <span class="text-gray-500 text-sm">(dejar en blanco para no cambiar)</span>
        </label>
        <input 
          type="password"
          formControlName="password"
          class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="Nueva contraseña"
        >
        <div *ngIf="profileForm.get('password')?.value" class="mt-2">
          <input 
            type="password"
            formControlName="confirmPassword"
            class="w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            placeholder="Confirmar nueva contraseña"
          >
          <div *ngIf="profileForm.hasError('passwordMismatch') && profileForm.get('confirmPassword')?.touched" 
               class="text-red-500 text-sm mt-1">
            Las contraseñas no coinciden
          </div>
        </div>
      </div>

      <!-- Botón de guardar (solo en edición) -->
      <div *ngIf="isEditing" class="pt-4">
        <button 
          type="submit"
          [disabled]="!profileForm.valid || isLoading"
          class="w-full bg-green-500 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold py-3 px-4 rounded flex justify-center items-center"
        >
          <span *ngIf="isLoading" class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></span>
          {{ isLoading ? 'Guardando...' : 'Guardar Cambios' }}
        </button>
      </div>

    </form>

    <!-- Mensajes de éxito/error -->
<div *ngIf="message" 
     [class]="messageType === 'success' ? 'bg-green-100 border-green-400 text-green-700' : 'bg-red-100 border-red-400 text-red-700'"
     class="border-t-4 rounded-b px-4 py-3 shadow-md mx-6 mb-6">
  <div class="flex items-center">
    <span class="text-2xl mr-3">
      {{ messageType === 'success' ? '✅' : '❌' }}
    </span>
    <div>
      <p class="font-medium">{{ message }}</p>
    </div>
  </div>
</div>

  </div>
</div>